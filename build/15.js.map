{"version":3,"sources":["../../src/pages/register/register.page.module.ts","../../src/pages/register/register.page.ts"],"names":[],"mappings":"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","file":"15.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { RegisterPage } from './register.page';\n\n@NgModule({\n  declarations: [\n    RegisterPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(RegisterPage),\n  ]\n})\nexport class RegisterPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register/register.page.module.ts","import { Component } from '@angular/core';\nimport { AlertController, IonicPage, Loading, LoadingController, NavController, NavParams } from 'ionic-angular';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\nimport { AuthService } from '../../providers/auth/auth.service';\nimport { BaseService } from '../../providers/base/base.service';\nimport { UserService } from '../../providers/user/user.service';\n\nimport * as firebase from 'firebase/app'\nimport { first } from 'rxjs/operators';\n\n@IonicPage({\n  defaultHistory: ['LoginPage']\n})\n\n@Component({\n  selector: 'page-register',\n  templateUrl: 'register.page.html',\n})\n\nexport class RegisterPage extends BaseService {\n\n  signupForm: FormGroup;\n\n  constructor(\n    public alertCtrl: AlertController,\n    public authService: AuthService,\n    public formBuilder: FormBuilder,\n    public loadingCtrl: LoadingController,\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public userService: UserService\n  ) {\n    super();\n    this.signupForm = this.formBuilder.group({\n      name: ['', [Validators.required, Validators.minLength(4)]],\n      username: ['', Validators.required],\n      email: ['', Validators.required],\n      password: ['', [Validators.required, Validators.minLength(6)]],\n      repassword: ['', [Validators.required, Validators.minLength(6)]]\n    });\n\n  }\n\n  onSubmit(): void {\n\n    let loading: Loading = this.showLoading(\"Registering...\");\n    let formUser = this.signupForm.value;\n    let username: string = formUser.username;\n\n    this.userService.userExists(username)\n      .pipe(\n        first()\n      )\n      .subscribe((userExists: boolean) => {\n\n        if (!userExists) {\n          this.authService.createAuthUser({\n            email: formUser.email,\n            password: formUser.password\n          }).then((authUser: firebase.User) => {\n\n            delete formUser.password;\n            delete formUser.repassword;\n            let uuid: string = authUser[\"user\"].uid;\n\n            this.userService.create(formUser, uuid)\n              .then(() => {\n                console.log('Cadastrado');\n                loading.dismiss();\n              }).catch((error: any) => {\n                loading.dismiss();\n                this.showAlert(`Register failed`, error);\n              });\n          }).catch((error: any) => {\n            loading.dismiss();\n            this.showAlert(`Register failed`, error);\n          });\n        } else {\n          loading.dismiss();\n          this.showAlert(`Register failed`, `The username ${username} is already in use`);\n        }\n\n      });\n\n  }\n\n  private showLoading(message): Loading {\n    let loading: Loading = this.loadingCtrl.create({\n      content: message\n    });\n\n    loading.present();\n\n    return loading;\n  }\n\n  private showAlert(title: string, message: string): void {\n    this.alertCtrl.create({\n      title: title,\n      subTitle: message,\n      buttons: ['Ok']\n    }).present();\n  }\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register/register.page.ts"],"sourceRoot":""}